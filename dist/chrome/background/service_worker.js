(()=>{function e(e,r,t,n,o,i,c){try{var a=e[i](c),s=a.value}catch(e){return void t(e)}a.done?r(s):Promise.resolve(s).then(n,o)}function r(r){return function(){var t=this,n=arguments;return new Promise((function(o,i){var c=r.apply(t,n);function a(r){e(c,o,i,a,s,"next",r)}function s(r){e(c,o,i,a,s,"throw",r)}a(void 0)}))}}function t(){return t=r((function*(e,r,t){const o=yield function(){return n.apply(this,arguments)}(),i=`sampleCode is ${o} and context is ${e.problemStatement}`;console.log(i);try{const e=yield fetch(`https://litcoder-server.saisanjay7660.workers.dev/api/generate?prompt=${encodeURIComponent(i)}&apiKey=${r}&model=${t}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=yield e.json();return console.log(n.response),n.response||"Failed to generate code."}catch(e){return console.error("Error generating code:",e),"An error occurred while generating code."}})),t.apply(this,arguments)}function n(){return(n=r((function*(){try{const[e]=yield chrome.tabs.query({active:!0,currentWindow:!0}),r=e.url,t=yield fetch(r),n=yield t.text(),o=n.indexOf("import java.io");if(-1===o)return console.log("No Java code block found"),"";let i=n.slice(o),c=0,a=0;for(let e=0;e<i.length;e++)if("{"===i[e]&&c++,"}"===i[e]&&(c--,0===c)){a=e+1;break}return i=i.slice(0,a),console.log("Extracted Java code:"),i}catch(e){return console.error("Error:",e),""}}))).apply(this,arguments)}chrome.runtime.onMessage.addListener((function(e,r,n){if("generate"===e.action)return function(e,r,n){return t.apply(this,arguments)}(e.data,e.apiKey,e.model).then((e=>{n({generatedCode:e})})),!0}))})();